<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Inventario • Sistema</title>
  <link rel="stylesheet" href="assets/css/styles.css"/>
</head>

<header class="topbar" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
  <h2><!-- se completa por JS --></h2>
  <div id="session-info" class="session-info" style="font-size:14px; color:#374151;"></div>
</header>

<body onload="requireAuth()">
<div class="container">
  <aside>
    <h2>🧭 Menú</h2>
    <nav>
      <a href="dashboard.html">📊 Dashboard</a>
      <a href="inventario.html">📦 Inventario</a>
      <a href="pos.html">🧾 Punto de venta</a>
      <a href="usuarios.html">👥 Usuarios</a>
      <a href="reportes.html">📈 Reportes</a>
      <a href="#" onclick="logout()">⏻ Cerrar sesión</a>
    </nav>
    <div class="helper">Versión prototipo</div>
  </aside>

  <div>
    <header>
      <strong>Inventario</strong>
      <div class="toolbar">
        <input class="search" placeholder="Buscar..."/>
      </div>
    </header>

    <main class="main">

      <div class="toolbar" style="margin-bottom:12px">
        <input id="inv-search" class="search" placeholder="Buscar producto"/>
        <button id="btn-new-product" class="primary">Agregar</button>
        <button id="export-inventory" class="ghost">Exportar CSV</button>
      </div>

      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Categoría</th>
              <th>Precio</th>
              <th>Stock</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="inv-tbody"></tbody>
        </table>
      </div>

      <!-- Modal producto -->
      <div id="modal-product" class="modal">
        <div class="panel">
          <h3>Producto</h3>
          <form id="form-product">
            <input type="hidden" name="pid"/>
            <div class="row">
              <div>
                <label>Nombre</label>
                <input required name="name"/>
              </div>
              <div>
                <label>Categoría</label>
                <input required name="category"/>
              </div>
            </div>
            <div class="row" style="margin-top:8px">
              <div>
                <label>Precio (S/)</label>
                <input required type="number" min="0" step="0.01" name="price"/>
              </div>
              <div>
                <label>Stock</label>
                <input required type="number" min="0" step="1" name="stock"/>
              </div>
            </div>
            <footer style="margin-top:12px">
              <button type="button" class="ghost" onclick="closeModal('modal-product')">Cancelar</button>
              <button class="primary" type="submit">Guardar</button>
            </footer>
          </form>
        </div>
      </div>

    </main>

    <footer>© 2025</footer>
  </div>
</div>

<script src="assets/js/app.js"></script>
<script>
  requireAuth(['Admin','Supervisor']);
  renderSessionBar('Inventario');
  initInventory();
</script>

</body>
</html>
